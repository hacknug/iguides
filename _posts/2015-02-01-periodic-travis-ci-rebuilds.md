---
title: Периодический запуск тестов на Travis-CI
---

Для некоторых проектов, особенно которые не  являются "вещью в себе", а зависят
от  некоторых внешних  источников,  необходимо запускать  тесты  или билды  при
изменении этих самых источников. Конечно,  оптимальный вариант - это триггерить
билд  при непосредственном  изменении  внешней зависимости,  но решение  просто
запускать  билд  с какой-то  периодичностью  -  гораздо  проще в  реализации  и
поддержке. Для подобных проектов, использующих популярный сервис [travis-ci][],
это  является  проблемой, потому  что  он  [не поддерживает][travis-issue]  это
искаропки. Но решение есть.

Для  [compless][]  мне  потребовался   периодический  запуск,  потому  что  для
некоторых миксинов  я использую хаки,  которые могут поломаться в  новой версии
lessjs. Как уже написал, travis  *пока* не поддерживает периодический запуск, и
недолгий гуглинг привёл  меня на [traviscron][] - сервис,  который этот недочёт
устраняет. Где-то  в течение  года все работало  нормально, тесты  гонялись, но
недавно я  заметил, что [что-то  пошло не так][traviscron-is-broken] -  судя по
всему, автор просто забил на проект.

Для ребят по ссылке решением  стало использовать [travis_cron][], написанный на
Руби,  и хостить  его  самостоятельно. Это  все конечно  круто,  подумал я,  но
использовать Руби, ставить кучу непонятных гемов для такой простой задачи - это
какой-то  оверкилл. В  общем,  были такие  же мысли,  что  сподвигнули меня  на
написание  [rawgithack][]. Итогом  стало написание  [travis-cron][] (нейминг!),
который занимает  двадцать строчек на баше  и делает практически то  же самое -
включая само-тестирование. Ох уж эти хипстеры!



[travis-ci]: http://travis-ci.org/
[travis-issue]: https://github.com/travis-ci/travis-ci/issues/582
[compless]: https://github.com/neoascetic/compless
[traviscron]: http://traviscron.pythonanywhere.com/
[traviscron-is-broken]: https://github.com/FiloSottile/travis-cron/issues/4
[travis_cron]: https://github.com/grosser/travis_cron
[rawgithack]: {% post_url 2014-05-05-raw-githack-com %}
[travis-cron]: https://github.com/neoascetic/travis-cron
